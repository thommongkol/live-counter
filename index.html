<!DOCTYPE html>
<html>
<head>
  <style>
    /*
      CSS อัปเดตใหม่สำหรับเอฟเฟกต์สามเหลี่ยมมุมซ้ายล่าง
    */
    body { 
      margin: 0; 
      font-family: system-ui, sans-serif; 
    }

    /* 1. ตัวสามเหลี่ยม (สร้างจาก Border) */
    .counter-triangle {
      position: fixed; /* ยึดตำแหน่งไว้กับหน้าจอ */
      bottom: 0;       /* ชิดขอบล่าง */
      left: 0;         /* ชิดขอบซ้าย */
      width: 0;        /* ไม่มีควางกว้าง */
      height: 0;       /* ไม่มีควางสูง */
      
      /* === หัวใจสำคัญของการสร้างสามเหลี่ยม === */
      /* สร้างสามเหลี่ยมมุมฉากชี้ขึ้นไปทางขวา */
      /* โดยด้านล่างเป็นสีทึบ และด้านขวาเป็นสีใส */
      border-bottom: 120px solid #1a73e8; /* ขนาดและความสูงของสามเหลี่ยม และสี */
      border-right: 120px solid transparent;   /* ด้านนี้โปร่งใส เพื่อสร้างเส้นทแยง */

      z-index: 999; /* กำหนดลำดับการซ้อนให้อยู่เกือบหน้าสุด */
    }

    /* 2. ข้อความตัวนับ */
    .counter-text {
      position: fixed; /* ยึดตำแหน่งไว้กับหน้าจอเช่นกัน */
      z-index: 1000;   /* ต้องอยู่หน้ากว่าตัวสามเหลี่ยม */

      /* จัดตำแหน่งข้อความให้อยู่กึ่งกลางบนเส้นทแยง */
      bottom: 25px; /* ขยับขึ้นจากขอบล่าง */
      left: 25px;   /* ขยับออกจากขอบซ้าย */
      
      /* ทำให้ข้อความเอียง -45 องศาให้ขนานกับขอบสามเหลี่ยม */
      transform: rotate(-45deg);
      
      /* ตกแต่งข้อความ */
      color: white;
      font-size: 16px;
      font-weight: bold;
      user-select: none; /* ป้องกันไม่ให้เผลอเลือกข้อความ */
    }

  </style>
</head>
<body>

  <!-- HTML อัปเดตใหม่: แยกส่วนของรูปทรงและข้อความออกจากกัน -->

  <!-- 1. Element สำหรับสร้าง "รูปทรง" สามเหลี่ยม -->
  <div class="counter-triangle"></div>

  <!-- 2. Element สำหรับแสดง "ข้อความ" ตัวนับ -->
  <div class="counter-text">
    <span id="user-count">กำลังเชื่อมต่อ...</span>
  </div>


  <!-- โค้ด Firebase ไม่มีการเปลี่ยนแปลง -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script>
    // การตั้งค่า Firebase ของคุณ (เหมือนเดิม)
    const firebaseConfig = {
      apiKey: "AIzaSyBQglstUR-qnDMq7CFdaC8JXYlYLe7TJqk",
      authDomain: "my-realtime-counter.firebaseapp.com",
      databaseURL: "https://my-realtime-counter-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "my-realtime-counter",
      storageBucket: "my-realtime-counter.firebasestorage.app",
      messagingSenderId: "1064997905833",
      appId: "1:1064997905833:web:ee5063e685310ac56150b8",
      measurementId: "G-2DPZF4KGY6"
    };

    // โค้ดส่วนที่เหลือทำงานเหมือนเดิมทั้งหมด
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const presenceRef = db.ref("presence/google-sites-viewers");
    
    db.ref(".info/connected").on("value", (snapshot) => {
      if (snapshot.val() === true) {
        const myConnection = presenceRef.push(true);
        myConnection.onDisconnect().remove();
      }
    });

    presenceRef.on("value", (snapshot) => {
      const userCount = snapshot.numChildren();
      const counterElement = document.getElementById("user-count");
      counterElement.textContent = `ผู้เข้าชม: ${userCount} คน`;
    });
  </script>

</body>
</html>
